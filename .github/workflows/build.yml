# This is the name of the workflow, visible on GitHub UI.
name: build_project
on: push
   # branches:
   #    - master

jobs:
  job_1:
    name: Build Project
    runs-on: ubuntu-18.04
  
    steps:
      - name: Checkout
        uses: actions/checkout@master

      - name: Get latest CMake and ninja
        uses: lukka/get-cmake@latest

      - name: Set up Clang
        uses: egor-tensin/setup-clang@v1
        with:
            version: 10
            platform: x64

      - name: Install GTest
        run: sudo apt-get install libgtest-dev
        
      - name: Install Eigen3
        uses: kupns-aka-kupa/setup-eigen3@v1
        env:
          CMAKE_GENERATOR: ninja

      - name: Build project
        run: |
          mkdir build
          cd build
          cmake ..
          cmake --build .
          
  # jobs_2:
  #    name: Create Release
  #    steps:
  #    id: create_release
  #     uses:    
  #    env:
  #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 
  #    with:
  #       tag_name: ${{ github.ref }}
  #       release_name: Release ${{ github.ref }}
  #       body: Just for test 
  #       draft: false
  #       prerelease: false
  #  - name: Upload Release Asset
  #     id: upload-release-asset 
  #     uses: actions/upload-release-asset@v1
  #     env:
  #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  #     with:
  #       upload_url: ${{ steps.create_release.outputs.upload_url }} 
  #       asset_path: ./build/tank
  #       asset_name: tank_test
  #       asset_content_type: application/bin